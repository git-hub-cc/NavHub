<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- SEO 元标签 -->
    <meta name="author" content="git-hub-cc">
    <meta name="description" content="NavHub - 一个轻量、优雅且功能强大的纯前端个人导航/起始页。支持聚合搜索、网站拖拽管理、暗黑模式切换和响应式设计。">
    <meta name="keywords" content="NavHub, 个人导航, 起始页, 浏览器主页, 聚合搜索, 开源项目">

    <title>NavHub</title>

    <!-- 引入 RemixIcon 图标库 (提升视觉体验) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">

    <!-- 引入样式 -->
    <link rel="stylesheet" href="style.css">

    <!-- 主题初始化脚本 (防止页面闪烁) -->
    <script>
        (function() {
            try {
                const preference = localStorage.getItem('theme-preference');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                let theme = 'light';
                if (preference) {
                    theme = preference;
                } else if (prefersDark) {
                    theme = 'dark';
                }
                document.documentElement.setAttribute('data-theme', theme);
            } catch (e) {}
        })();
    </script>
</head>
<body>

<!-- 动态背景层 -->
<div class="background-layer"></div>

<!-- 移动端侧边栏遮罩 -->
<div id="sidebar-overlay" class="sidebar-overlay"></div>

<!-- 移动端顶部导航栏 -->
<div class="mobile-header">
    <button id="mobile-menu-btn" class="icon-btn" aria-label="菜单">
        <i class="ri-menu-line"></i>
    </button>
    <div class="mobile-logo">NavHub</div>
    <div class="mobile-placeholder"></div> <!-- 占位用于平衡布局 -->
</div>

<!-- 页面主容器 -->
<div class="container">

    <!-- ========================================================================== -->
    <!--                                侧边栏 (Sidebar)                              -->
    <!-- ========================================================================== -->
    <nav class="sidebar" id="sidebar">
        <!-- 侧边栏头部 -->
        <div class="sidebar-header">
            <div class="logo">
                <img src="favicon.svg" alt="NavHub Logo" width="48" height="48"> NavHub
            </div>
        </div>

        <!-- 侧边栏滚动区域：分类列表 -->
        <div class="sidebar-scroll-area">
            <ul class="category-list">
                <!-- 分类列表将由 JS 动态生成 -->
            </ul>
        </div>

        <!-- 侧边栏底部：功能控制台 -->
        <div class="sidebar-footer">

            <!-- 数据源选择器 -->
            <div class="data-source-wrapper">
                <div class="control-label">数据源</div>
                <div id="custom-select" class="custom-select" tabindex="0">
                    <div id="custom-select-trigger" class="custom-select-trigger">
                        <span id="custom-select-selected-text">默认数据</span>
                        <i class="ri-arrow-down-s-line arrow-icon"></i>
                    </div>
                    <div id="custom-select-options" class="custom-select-options">
                        <!-- 选项将由 JS 动态填充 -->
                    </div>
                </div>
            </div>

            <!-- 操作按钮组 -->
            <div class="action-grid">
                <button id="import-btn" class="icon-btn-text" title="导入">
                    <i class="ri-upload-cloud-2-line"></i> <span>导入</span>
                </button>
                <button id="export-btn" class="icon-btn-text" title="导出">
                    <i class="ri-download-cloud-2-line"></i> <span>导出</span>
                </button>
                <button id="delete-source-btn" class="icon-btn-text danger" title="删除当前源">
                    <i class="ri-delete-bin-line"></i> <span>删除</span>
                </button>
                <!-- 隐藏的文件输入框 -->
                <input type="file" id="import-file-input" accept=".json,.html" style="display: none;">
            </div>

            <!-- 底部工具栏：社交 + 主题 -->
            <div class="footer-toolbar">
                <div class="social-links">
                    <a href="https://github.com/git-hub-cc/NavHub" target="_blank" title="GitHub">
                        <i class="ri-github-line"></i>
                    </a>
                </div>

                <div class="theme-toggle-wrapper">
                    <input type="checkbox" id="dark-mode-switch" class="theme-switch-input" />
                    <label for="dark-mode-switch" class="theme-switch-label">
                        <i class="ri-sun-line sun-icon"></i>
                        <i class="ri-moon-line moon-icon"></i>
                    </label>
                </div>
            </div>

            <div class="copyright">© 2024 NavHub</div>
        </div>
    </nav>

    <!-- ========================================================================== -->
    <!--                                主内容区 (Main Content)                         -->
    <!-- ========================================================================== -->
    <main class="main-content">
        <div class="main-content-inner">

            <!-- Hero 区域：搜索 -->
            <header class="hero-section">
                <div class="search-container">
                    <!-- 搜索类别 Tabs -->
                    <div id="search-category-buttons" class="search-tabs">
                        <!-- JS生成 -->
                    </div>

                    <!-- 搜索框主体 -->
                    <form id="search-form" class="search-box">
                        <div class="search-input-group">
                            <i class="ri-search-2-line search-icon"></i>
                            <input type="text" id="search-input" autocomplete="off" placeholder="探索网络世界...">
                            <button type="submit" id="search-button" class="search-btn-submit">
                                <i class="ri-arrow-right-line"></i>
                            </button>
                        </div>
                        <ul id="suggestions-list" class="suggestions-dropdown"></ul>
                    </form>

                    <!-- 搜索引擎选择 -->
                    <div id="search-engine-checkboxes" class="engine-selector">
                        <!-- JS生成 -->
                    </div>
                </div>
            </header>

            <!-- 内容卡片区 -->
            <div class="content-wrapper" id="content-wrapper">
                <!-- JS 动态渲染导航内容 -->
            </div>

            <!-- 致谢部分 -->
            <section class="footer-section">
                <div class="divider">
                    <span>致谢与资源</span>
                </div>
                <div class="acknowledgements-grid">

                    <a href="https://github.com/helloxz/onenav" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">onenav</span>
                        <span class="ack-card-subtitle">灵感来源</span>
                    </a>
                    <a href="https://github.com/mozillazg/pinyin-data" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">pinyin-data</span>
                        <span class="ack-card-subtitle">汉字转拼音</span>
                    </a>
                    <a href="https://link3.cc/studyship" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">学习资源船舱</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="https://hao.199it.com" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">大数据导航</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="http://baozangku.ysepan.com/" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">哆啦A梦的神奇口袋</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="https://xiaoshuai.link/" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">小帅同学</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="https://lazytest.vercel.app/#/" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">懒人找资源</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="http://xuexinxs.ysepan.com/" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">薛信的资料室</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="http://axutongxue.ysepan.com/" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">阿虚同学</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="http://chendandan.ysepan.com/" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">陈蛋蛋的宝藏库</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                    <a href="http://ygtq.ysepan.com/#/" target="_blank" rel="noopener noreferrer" class="mini-card">
                        <span class="ack-card-title">鱼果天晴的资源库</span>
                        <span class="ack-card-subtitle">数据来源</span>
                    </a>
                </div>
            </section>
        </div>
    </main>
</div>

<!-- ========================================================================== -->
<!--                                模态框 (Modals)                               -->
<!-- ========================================================================== -->

<!-- 网站编辑/新增模态框 -->
<div id="site-modal" class="modal-overlay modal-hidden">
    <div class="modal-glass">
        <div class="modal-header">
            <h3 id="modal-title">新增网站</h3>
            <button class="close-modal-btn" id="cancel-btn"><i class="ri-close-line"></i></button>
        </div>
        <form id="site-form" class="modal-form">
            <!-- 隐藏字段：用于存储当前网站ID（编辑模式） -->
            <input type="hidden" id="site-id">
            <!-- 隐藏字段：用于记住当前操作的目标分类ID -->
            <input type="hidden" id="category-id">

            <!-- 【新增】只读字段：显示分类名称，让用户明确知道归档位置 -->
            <div class="form-item">
                <label for="site-category-name">所属分类</label>
                <input type="text" id="site-category-name" disabled style="background-color: var(--bg-base); opacity: 0.7; cursor: not-allowed; color: var(--text-primary);">
            </div>

            <div class="form-item">
                <label for="site-url">网址</label>
                <div class="input-with-icon">
                    <i class="ri-link"></i>
                    <input type="url" id="site-url" placeholder="https://" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-item">
                    <label for="site-title">标题</label>
                    <input type="text" id="site-title" placeholder="网站名称" required>
                </div>
                <div class="form-item">
                    <label for="site-icon">图标 URL</label>
                    <input type="url" id="site-icon" placeholder="自动获取或手动输入">
                </div>
            </div>

            <div class="form-item">
                <label for="site-desc">描述</label>
                <textarea id="site-desc" rows="2" placeholder="简短的描述..."></textarea>
            </div>

            <div class="form-item checkbox-item">
                <input type="checkbox" id="site-proxy">
                <label for="site-proxy">需要代理访问</label>
            </div>

            <div class="modal-footer">
                <button type="submit" class="btn-primary-glass">保存</button>
            </div>
        </form>
    </div>
</div>

<!-- 导入命名模态框 -->
<div id="import-name-modal" class="modal-overlay modal-hidden">
    <div class="modal-glass small-modal">
        <h3>命名数据源</h3>
        <form id="import-name-form" class="modal-form">
            <div class="form-item">
                <input type="text" id="import-name-input" required placeholder="例如：我的工作台">
                <p id="import-name-error" class="error-msg"></p>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancel-import-name-btn" class="btn-ghost">取消</button>
                <button type="submit" class="btn-primary-glass">确认</button>
            </div>
        </form>
    </div>
</div>

<!-- 提示/确认模态框 -->
<div id="alert-confirm-modal" class="modal-overlay modal-hidden">
    <div class="modal-glass small-modal text-center">
        <h3 id="alert-confirm-title">提示</h3>
        <div class="modal-body">
            <p id="alert-confirm-message"></p>
        </div>
        <div class="modal-footer center-footer">
            <button type="button" id="alert-confirm-cancel-btn" class="btn-ghost">取消</button>
            <button type="button" id="alert-confirm-ok-btn" class="btn-primary-glass">确认</button>
        </div>
    </div>
</div>

<!-- 脚本加载 -->
<script src="./js/pinyinManager.js"></script>
<script type="module" src="./js/main.js"></script>

</body>
</html>